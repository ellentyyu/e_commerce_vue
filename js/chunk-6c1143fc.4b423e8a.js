(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c1143fc"],{"00b4":function(e,t,c){"use strict";c("ac1f");var a=c("23e7"),o=c("da84"),s=c("c65b"),l=c("e330"),r=c("1626"),n=c("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=o.Error,b=l(/./.test);a({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!r(t))return b(this,e);var c=s(t,this,e);if(null!==c&&!n(c))throw new u("RegExp exec method returned something other than an Object or null");return!!c}})},"7fd9":function(e,t,c){"use strict";var a=c("7a23"),o={class:"scroll-top position-fixed"};function s(e,t,c,s,l,r){return Object(a["B"])(),Object(a["g"])("div",o,[Object(a["h"])("a",{href:"#",class:"fas fa-caret-up scroll-top-arrow fs-s text-center text-white",onClick:t[0]||(t[0]=Object(a["Y"])((function(){return r.scrollTop&&r.scrollTop.apply(r,arguments)}),["prevent"]))})])}var l={methods:{scrollTop:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}}},r=c("6b0d"),n=c.n(r);const i=n()(l,[["render",s]]);t["a"]=i},b0c0:function(e,t,c){var a=c("83ab"),o=c("5e77").EXISTS,s=c("e330"),l=c("9bf2").f,r=Function.prototype,n=s(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(i.exec),b="name";a&&!o&&l(r,b,{configurable:!0,get:function(){try{return u(i,n(this))[1]}catch(e){return""}}})},e90b:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o=Object(a["h"])("div",null,null,-1),s={key:0,class:"pt-9 pb-6 order-bg-lightgray container-fluid container-custom"},l=Object(a["h"])("section",{class:"order-three-sqs mb-6"},[Object(a["h"])("div",{class:"row"},[Object(a["h"])("div",{class:"col-4"},[Object(a["h"])("div",{class:"sq-item active"},[Object(a["h"])("p",null,"STEP 1"),Object(a["h"])("p",null,"確認訂單")])]),Object(a["h"])("div",{class:"col-4"},[Object(a["h"])("div",{class:"sq-item"},[Object(a["h"])("p",null,"STEP 2"),Object(a["h"])("p",null,"建立訂單")])]),Object(a["h"])("div",{class:"col-4"},[Object(a["h"])("div",{class:"sq-item"},[Object(a["h"])("p",null,"STEP 3"),Object(a["h"])("p",null,"完成訂單")])])])],-1),r={class:"order-info row gx-lg-5"},n={class:"col-12 col-md-6 mb-5 mb-md-0"},i={class:"order px-2 ps-md-3 ps-lg-5"},u={class:"position-relative"},b=Object(a["h"])("h1",{class:"header"},"訂單資訊",-1),d={class:"col-auto d-none d-ss-block"},h={class:"col"},m={class:"mb-1"},j={class:""},O={class:"col-auto col-sm-3 col-lg-auto me-1 me-sm-0"},f={class:""},p={class:"input-group mb-4"},v=["placeholder"],g={class:"text-end"},k={class:"mb-2"},y=Object(a["j"])("總計金額"),x={key:0},w=Object(a["j"])("折扣後金額 "),V={class:"ms-4 fs-5"},S={class:"col-12 col-md-6"},T={class:"customer px-2 pe-me-3 pe-lg-5"},C=Object(a["h"])("h2",{class:"header"},"顧客資訊",-1),M={class:"form-item"},E=Object(a["h"])("label",{for:"email",class:"form-label"},"Email",-1),J={class:"form-item"},$=Object(a["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),q={class:"form-item"},B=Object(a["h"])("label",{for:"phonenb",class:"form-label"},"聯絡電話",-1),P={class:"form-item"},U=Object(a["h"])("label",{for:"address",class:"form-label"},"收件地址",-1),_={class:"form-item"},L=Object(a["h"])("label",{for:"notes",class:"form-label"},"備註",-1),I=Object(a["h"])("button",{type:"submit",class:"btn btn-order w-100"},"送出訂單",-1),R={key:1,class:"text-center py-8 no-item"},F=Object(a["h"])("i",{class:"fs-1 mb-3 fas fa-exclamation-circle"},null,-1),N=Object(a["h"])("p",{class:"ls-1 mb-3"},"購物車內沒有商品",-1),Q=Object(a["j"])("挑選商品");function W(e,t,c,W,H,X){var Y=this,z=Object(a["J"])("Loading"),A=Object(a["J"])("ToastMessages"),D=Object(a["J"])("Field"),G=Object(a["J"])("ErrorMessage"),K=Object(a["J"])("Form"),Z=Object(a["J"])("router-link"),ee=Object(a["J"])("Layout"),te=Object(a["J"])("ScrollTop");return Object(a["B"])(),Object(a["g"])(a["a"],null,[o,Object(a["k"])(z,{active:H.isLoading},null,8,["active"]),Object(a["k"])(A),Object(a["k"])(ee,{ref:"layout",onRenderCart:X.renderCart},{default:Object(a["V"])((function(){return[H.cart.carts?(Object(a["B"])(),Object(a["g"])("div",s,[H.cart.carts.length?(Object(a["B"])(),Object(a["g"])(a["a"],{key:0},[l,Object(a["h"])("section",r,[Object(a["h"])("div",n,[Object(a["h"])("div",i,[Object(a["h"])("div",u,[b,Object(a["h"])("button",{class:"btn-edit",onClick:t[0]||(t[0]=function(e){return Y.$refs.layout.isShow=!0})},"修改訂單")]),Object(a["h"])("ul",null,[(Object(a["B"])(!0),Object(a["g"])(a["a"],null,Object(a["H"])(H.cart.carts,(function(e){return Object(a["B"])(),Object(a["g"])("li",{key:e.id,class:"mb-4 row g-3 align-items-center"},[Object(a["h"])("div",d,[Object(a["h"])("div",{class:"order-img bg-cover",style:Object(a["t"])("background-image:url(".concat(X.getImgUrl(e.product.images[0]),");"))},null,4)]),Object(a["h"])("div",h,[Object(a["h"])("p",m,Object(a["M"])(e.product.title),1),Object(a["h"])("p",j,"數量 : "+Object(a["M"])(e.qty),1)]),Object(a["h"])("div",O,[Object(a["h"])("p",f,"NT$ "+Object(a["M"])(X.currency(e.total)),1)])])})),128))]),Object(a["h"])("div",p,[Object(a["W"])(Object(a["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return H.couponCode=e}),type:"text",class:"form-control text-center",placeholder:H.couponPlaceholder,"aria-label":"coupon code","aria-describedby":"coupon"},null,8,v),[[a["Q"],H.couponCode]]),Object(a["h"])("button",{class:"btn btn-coupon",type:"button",id:"coupon",onClick:t[2]||(t[2]=function(e){return X.useCoupon()})},"套用優惠券")]),Object(a["h"])("div",g,[Object(a["h"])("p",k,[y,Object(a["h"])("span",{class:Object(a["s"])(["ms-4",{"text-decoration-line-through":H.cart.total!==H.cart.final_total,"fs-5":H.cart.total==H.cart.final_total}])},"NT$ "+Object(a["M"])(X.currency(H.cart.total)),3)]),H.cart.total!==H.cart.final_total?(Object(a["B"])(),Object(a["g"])("p",x,[w,Object(a["h"])("span",V,"NT$ "+Object(a["M"])(X.currency(H.cart.final_total)),1)])):Object(a["f"])("",!0)])])]),Object(a["h"])("div",S,[Object(a["h"])("div",T,[C,Object(a["k"])(K,{onSubmit:X.createOrder},{default:Object(a["V"])((function(e){var c=e.errors;return[Object(a["h"])("div",M,[E,Object(a["k"])(D,{type:"email",name:"email",rules:"email|required",id:"email",class:Object(a["s"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",modelValue:H.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return H.form.user.email=e})},null,8,["class","modelValue"]),Object(a["k"])(G,{name:"email",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",J,[$,Object(a["k"])(D,{type:"text",name:"收件人姓名",rules:"required",id:"name",class:Object(a["s"])(["form-control",{"is-invalid":c["收件人姓名"]}]),placeholder:"請輸入姓名",modelValue:H.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return H.form.user.name=e})},null,8,["class","modelValue"]),Object(a["k"])(G,{name:"收件人姓名",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",q,[B,Object(a["k"])(D,{type:"text",name:"手機號碼",rules:X.isPhone,id:"phonenb",class:Object(a["s"])(["form-control",{"is-invalid":c["手機號碼"]}]),placeholder:"請輸入手機號碼",modelValue:H.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return H.form.user.tel=e})},null,8,["rules","class","modelValue"]),Object(a["k"])(G,{name:"手機號碼",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",P,[U,Object(a["k"])(D,{type:"text",name:"收件地址",rules:"required",id:"address",class:Object(a["s"])(["form-control",{"is-invalid":c["收件地址"]}]),placeholder:"請輸入地址",modelValue:H.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return H.form.user.address=e})},null,8,["class","modelValue"]),Object(a["k"])(G,{name:"收件地址",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",_,[L,Object(a["W"])(Object(a["h"])("textarea",{name:"notes",id:"notes",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=function(e){return H.form.message=e})},null,512),[[a["Q"],H.form.message]])]),I]})),_:1},8,["onSubmit"])])])])],64)):(Object(a["B"])(),Object(a["g"])("div",R,[F,N,Object(a["k"])(Z,{to:"/products",class:"btn-shop d-inline-block ls-1",onClick:t[8]||(t[8]=function(t){return e.isShow=!1})},{default:Object(a["V"])((function(){return[Q]})),_:1})]))])):Object(a["f"])("",!0)]})),_:1},8,["onRenderCart"]),Object(a["k"])(te)],64)}c("ac1f"),c("00b4"),c("99af");var H=c("7fd9"),X=c("f367"),Y=c("9bb9"),z={components:{ScrollTop:H["a"],ToastMessages:X["a"]},inject:["pushMessagesState"],data:function(){return{isLoading:!0,cart:{},couponCode:"",couponPlaceholder:"請輸入優惠券代碼",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{currency:Y["a"],isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確手機號碼"},renderCart:function(e){this.cart=e,this.isLoading=!1,this.cart.total!==this.cart.final_total&&(this.couponPlaceholder="已套用優惠券")},getImgUrl:function(e){return c("34fe")("./"+e)},useCoupon:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/coupon");this.$http.post(t,{data:{code:this.couponCode}}).then((function(t){e.pushMessagesState(t,t.data.message),t.data.success&&e.$refs.layout.getCart()})).catch((function(e){console.error(e)}))},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/order");this.$http.post(t,{data:this.form}).then((function(t){var c=e;setTimeout((function(){c.pushMessagesState(t,t.data.message)})),t.data.success&&e.$router.push("/checkout/".concat(t.data.orderId))})).catch((function(e){console.error(e)}))}}},A=c("6b0d"),D=c.n(A);const G=D()(z,[["render",W]]);t["default"]=G}}]);
//# sourceMappingURL=chunk-6c1143fc.4b423e8a.js.map