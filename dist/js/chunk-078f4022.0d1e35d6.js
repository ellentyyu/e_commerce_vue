(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-078f4022"],{1276:function(e,t,a){"use strict";var n=a("2ba4"),r=a("c65b"),c=a("e330"),l=a("d784"),s=a("44e7"),o=a("825a"),d=a("1d80"),i=a("4840"),u=a("8aa5"),b=a("50c4"),h=a("577e"),p=a("dc4a"),O=a("4dae"),m=a("14c3"),f=a("9263"),g=a("9f7f"),j=a("d039"),v=g.UNSUPPORTED_Y,x=4294967295,M=Math.min,y=[].push,k=c(/./.exec),w=c(y),_=c("".slice),D=!j((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));l("split",(function(e,t,a){var c;return c="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var c=h(d(this)),l=void 0===a?x:a>>>0;if(0===l)return[];if(void 0===e)return[c];if(!s(e))return r(t,c,e,l);var o,i,u,b=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,g=new RegExp(e.source,p+"g");while(o=r(f,g,c)){if(i=g.lastIndex,i>m&&(w(b,_(c,m,o.index)),o.length>1&&o.index<c.length&&n(y,b,O(o,1)),u=o[0].length,m=i,b.length>=l))break;g.lastIndex===o.index&&g.lastIndex++}return m===c.length?!u&&k(g,"")||w(b,""):w(b,_(c,m)),b.length>l?O(b,0,l):b}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:r(t,this,e,a)}:t,[function(t,a){var n=d(this),l=void 0==t?void 0:p(t,e);return l?r(l,t,n,a):r(c,h(n),t,a)},function(e,n){var r=o(this),l=h(e),s=a(c,r,l,n,c!==t);if(s.done)return s.value;var d=i(r,RegExp),p=r.unicode,O=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(v?"g":"y"),f=new d(v?"^(?:"+r.source+")":r,O),g=void 0===n?x:n>>>0;if(0===g)return[];if(0===l.length)return null===m(f,l)?[l]:[];var j=0,y=0,k=[];while(y<l.length){f.lastIndex=v?0:y;var D,E=m(f,v?_(l,y):l);if(null===E||(D=M(b(f.lastIndex+(v?y:0)),l.length))===j)y=u(l,y,p);else{if(w(k,_(l,j,y)),k.length===g)return k;for(var I=1;I<=E.length-1;I++)if(w(k,E[I]),k.length===g)return k;y=j=D}}return w(k,_(l,j)),k}]}),!D,v)},"25f0":function(e,t,a){"use strict";var n=a("e330"),r=a("5e77").PROPER,c=a("6eeb"),l=a("825a"),s=a("3a9b"),o=a("577e"),d=a("d039"),i=a("ad6d"),u="toString",b=RegExp.prototype,h=b[u],p=n(i),O=d((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),m=r&&h.name!=u;(O||m)&&c(RegExp.prototype,u,(function(){var e=l(this),t=o(e.source),a=e.flags,n=o(void 0===a&&s(b,e)&&!("flags"in b)?p(e):a);return"/"+t+"/"+n}),{unsafe:!0})},b0c0:function(e,t,a){var n=a("83ab"),r=a("5e77").EXISTS,c=a("e330"),l=a("9bf2").f,s=Function.prototype,o=c(s.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=c(d.exec),u="name";n&&!r&&l(s,u,{configurable:!0,get:function(){try{return i(d,o(this))[1]}catch(e){return""}}})},c9a0:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r={class:"admin-orders admin-table pt-4 pb-5",style:{"margin-left":"-12px","margin-right":"-12px"}},c={class:"d-flex flex-column h-100"},l={class:"table mb-auto"},s=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{class:"column-id"},"訂單號碼"),Object(n["h"])("th",{class:"column-date"},"訂單日期"),Object(n["h"])("th",{class:"column-name",width:"60"},"訂購人"),Object(n["h"])("th",null,"付款"),Object(n["h"])("th",{class:"column-edit"},"編輯")])],-1),o={class:"text-break"},d={class:"text-break"},i={key:0},u={key:0,class:"text-success"},b=Object(n["h"])("i",{class:"fas fa-check"},null,-1),h=[b],p={key:1,class:"text-muted"},O=Object(n["h"])("i",{class:"fas fa-times"},null,-1),m=[O],f={class:"btn-group"},g=["onClick"],j=["onClick"];function v(e,t,a,b,O,v){var x=Object(n["J"])("Loading"),M=Object(n["J"])("Pagination"),y=Object(n["J"])("OrderModal"),k=Object(n["J"])("DelModal");return Object(n["B"])(),Object(n["g"])("div",r,[Object(n["k"])(x,{active:O.isLoading},null,8,["active"]),Object(n["h"])("div",c,[Object(n["h"])("table",l,[s,Object(n["h"])("tbody",null,[(Object(n["B"])(!0),Object(n["g"])(n["a"],null,Object(n["H"])(O.orders,(function(e){return Object(n["B"])(),Object(n["g"])("tr",{key:e.id},[Object(n["h"])("td",o,Object(n["M"])(e.id),1),Object(n["h"])("td",d,Object(n["M"])(e.create_at),1),e.user?(Object(n["B"])(),Object(n["g"])("td",i,Object(n["M"])(e.user.name),1)):Object(n["f"])("",!0),Object(n["h"])("td",null,[e.is_paid?(Object(n["B"])(),Object(n["g"])("span",u,h)):(Object(n["B"])(),Object(n["g"])("span",p,m))]),Object(n["h"])("td",null,[Object(n["h"])("div",f,[Object(n["h"])("button",{class:"btn btn-outline-success btn-sm",onClick:function(t){return v.openModal(e)}},"編輯",8,g),Object(n["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return v.openDelModal(e)}},"刪除",8,j)])])])})),128))])]),Object(n["k"])(M,{class:"mt-4",pages:O.pagination,onEmitPages:v.getOrders},null,8,["pages","onEmitPages"])]),Object(n["k"])(y,{ref:"orderModal",order:O.tempOrder,onUpdateOrder:v.updateOrder},null,8,["order","onUpdateOrder"]),Object(n["k"])(k,{ref:"delModal",delItem:O.delOrder,onDeleteItem:v.deleteOrder},null,8,["delItem","onDeleteItem"])])}var x=a("5530"),M=(a("99af"),a("d81d"),a("ac1f"),a("1276"),a("d3b7"),a("159b"),a("25f0"),{class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true",ref:"modal"}),y={class:"modal-dialog",role:"document"},k={class:"modal-content border-0"},w=Object(n["h"])("div",{class:"modal-header bg-dark text-white"},[Object(n["h"])("h5",{class:"modal-title",id:"orderModalLabel"},[Object(n["h"])("span",null,"修改訂單")]),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_={key:0,class:"modal-body"},D={class:"row"},E={class:"col-12"},I={class:"mb-3"},S=Object(n["h"])("p",{class:"mb-3"},"訂單號碼",-1),P={class:"row gx-2"},U={class:"mb-3 col-md-6"},B=Object(n["h"])("label",{for:"name",class:"form-label"},"訂購人",-1),C={class:"mb-3 col-md-6"},$=Object(n["h"])("label",{for:"email",class:"form-label"},"E-mail",-1),L={class:"row gx-2"},R={class:"mb-3 col-md-6"},J=Object(n["h"])("label",{for:"tel",class:"form-label"},"聯絡電話",-1),V={class:"mb-3 col-md-6"},W=Object(n["h"])("label",{for:"address",class:"form-label"},"收件地址",-1),Q={class:"mb-3"},T={class:"form-check"},F=Object(n["h"])("label",{class:"form-check-label",for:"is_paid"}," 是否付款 ",-1),Y={class:"modal-footer"},A=Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function H(e,t,a,r,c,l){return Object(n["B"])(),Object(n["g"])("div",M,[Object(n["h"])("div",y,[Object(n["h"])("div",k,[w,c.tempOrder.user?(Object(n["B"])(),Object(n["g"])("div",_,[Object(n["h"])("div",D,[Object(n["h"])("div",E,[Object(n["h"])("div",I,[S,Object(n["h"])("p",null,Object(n["M"])(c.tempOrder.id),1)]),Object(n["h"])("div",P,[Object(n["h"])("div",U,[B,Object(n["W"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.tempOrder.user.name=e}),placeholder:"請輸入姓名"},null,512),[[n["Q"],c.tempOrder.user.name]])]),Object(n["h"])("div",C,[$,Object(n["W"])(Object(n["h"])("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.tempOrder.user.email=e}),placeholder:"請輸入email"},null,512),[[n["Q"],c.tempOrder.user.email]])])]),Object(n["h"])("div",L,[Object(n["h"])("div",R,[J,Object(n["W"])(Object(n["h"])("input",{type:"tel",class:"form-control",id:"tel","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.tempOrder.user.tel=e}),placeholder:"請輸入電話"},null,512),[[n["Q"],c.tempOrder.user.tel]])]),Object(n["h"])("div",V,[W,Object(n["W"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.tempOrder.user.address=e}),placeholder:"請輸入地址"},null,512),[[n["Q"],c.tempOrder.user.address]])])]),Object(n["h"])("div",Q,[Object(n["h"])("div",T,[Object(n["W"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.tempOrder.is_paid=e}),id:"is_paid"},null,512),[[n["P"],c.tempOrder.is_paid]]),F])])])])])):Object(n["f"])("",!0),Object(n["h"])("div",Y,[A,Object(n["h"])("button",{type:"button",class:"btn btn-success",onClick:t[5]||(t[5]=function(t){return e.$emit("update-order",c.tempOrder)})},"確認")])])])],512)}var N=a("e0ae"),X={mixins:[N["a"]],props:{order:{type:Object,default:function(){return{}}}},watch:{order:function(){this.tempOrder=this.order}},data:function(){return{modal:{},tempOrder:{}}}},q=a("6b0d"),z=a.n(q);const G=z()(X,[["render",H]]);var K=G,Z=a("6ff1"),ee=a("1799"),te=a("9bb9"),ae={data:function(){return{orders:[],pagination:{},tempOrder:{},delOrder:{},isLoading:!1}},components:{OrderModal:K,DelModal:Z["a"],Pagination:ee["a"]},inject:["pushMessagesState"],methods:{currency:te["a"],getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/admin/orders?page=").concat(t);this.isLoading=!0,this.$http.get(a).then((function(t){e.isLoading=!1,t.data.success&&(e.orders=t.data.orders,e.processData(e.orders),e.pagination=t.data.pagination)}))},openModal:function(e){this.tempOrder=Object(x["a"])({},e),this.$refs.orderModal.showModal()},updateOrder:function(e){var t=this,a=Object(x["a"])({},e),n=a.create_at.split("-").map((function(e){return parseInt(e)})),r=new Date(n[0],n[1]-1,n[2]);a.create_at=r.getTime()/1e3;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/admin/order/").concat(e.id),l=this.$refs.orderModal;this.$http.put(c,{data:a}).then((function(e){l.hideModal(),t.pushMessagesState(e),e.data.success&&t.getOrders(t.pagination.current_page)}))},openDelModal:function(e){this.delOrder=e,this.$refs.delModal.showModal()},deleteOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/admin/order/").concat(this.delOrder.id);this.$http.delete(t).then((function(t){t.data.success&&(e.$refs.delModal.hideModal(),e.pushMessagesState(t),e.getOrders(e.pagination.current_page))}))},processData:function(e){e.forEach((function(e){e.total=Math.round(e.total);var t=new Date(1e3*e.create_at),a=(t.getMonth()+1).toString(),n=t.getDate().toString();1==a.length&&(a="0"+a),1==n.length&&(n="0"+n),e.create_at="".concat(t.getFullYear(),"-").concat(a,"-").concat(n)}))}},created:function(){this.getOrders()}};const ne=z()(ae,[["render",v]]);t["default"]=ne},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,c=a("1dde"),l=c("map");n({target:"Array",proto:!0,forced:!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-078f4022.0d1e35d6.js.map