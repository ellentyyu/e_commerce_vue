{"version":3,"sources":["webpack:///./src/views/Checkout.vue","webpack:///./src/views/Checkout.vue?3d9c","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","href","active","isLoading","ref","order","is_paid","user","create_at","id","name","tel","email","address","message","currency","total","isShow","style","detailsHeight","products","item","key","product","images","title","qty","type","payOrder","components","ScrollTop","ToastMessages","inject","data","methods","getOrder","api","this","orderId","$http","get","then","res","success","Math","round","processDate","timestamp","d","Date","yy","getFullYear","mm","getMonth","dd","getDate","post","pushMessagesState","window","scrollTo","top","behavior","computed","$refs","details","scrollHeight","$route","params","created","__exports__","render","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","error"],"mappings":"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","file":"js/chunk-43277106.56bddd62.js","sourcesContent":["<template>\r\n<div></div>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <ToastMessages></ToastMessages>\r\n  <Layout ref=\"layout\">\r\n    <div class=\"pt-9 pb-6 order-bg-lightgray container-fluid container-custom\">\r\n      <section class=\"order-three-sqs mb-6\">\r\n        <div class=\"row\">\r\n          <div class=\"col-4\">\r\n            <div class=\"sq-item\">\r\n              <p>STEP 1</p>\r\n              <p>確認訂單</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"sq-item\" :class=\"{'active':!order.is_paid}\">\r\n              <p>STEP 2</p>\r\n              <p>建立訂單</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"sq-item\" :class=\"{'active':order.is_paid}\">\r\n              <p>STEP 3</p>\r\n              <p>完成訂單</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section class=\"payment-success row justify-content-center mb-5\" v-if=\"order.is_paid\">\r\n        <div class=\"col-12 col-md-6\">\r\n          <div class=\"payment-success-bg py-5\">\r\n            <div class=\"text-center mb-4\">\r\n              <h2 class=\"mb-1 fs-5 fw-bold ls-1\">感謝您的訂購</h2>\r\n              <p class=\"fw-bold ls-1\">訂單為您盡速處理中<i class=\"ms-2 fas fa-shipping-fast\"></i></p>\r\n            </div>\r\n            <div class=\"d-flex justify-content-center\">\r\n              <a href=\"#\" class=\"col-5 col-sm-3 mx-3 btn-back-home\">回到首頁</a>\r\n              <a href=\"#/products\" class=\"col-5 col-sm-3 mx-3 btn-back-shop\">繼續逛逛</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section class=\"order-placed row justify-content-center\">\r\n        <div class=\"col-12 col-md-6\">\r\n          <div v-if=\"order.user\">\r\n            <h1 class=\"header\">訂購資訊</h1>\r\n            <ul class=\"order-details px-1 px-sm-0\">\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">下單日期：</p>\r\n                <p>{{order.create_at}}</p>\r\n              </li>\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">訂單編號：</p>\r\n                <p class=\"text-break\">{{order.id}}</p>\r\n              </li>\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">顧客姓名：</p>\r\n                <p>{{order.user.name}}</p>\r\n              </li>\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">聯絡電話：</p>\r\n                <p>{{order.user.tel}}</p>\r\n              </li>\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">電子郵件：</p>\r\n                <p class=\"text-break\">{{order.user.email}}</p>\r\n              </li>\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">收件地址：</p>\r\n                <p>{{order.user.address}}</p>\r\n              </li>\r\n              <li class=\"d-flex mb-3\" v-if=\"order.message\">\r\n                <p class=\"col-4 fw-bold\">備註：</p>\r\n                <p>{{order.message}}</p>\r\n              </li>\r\n              <li>\r\n                <div class=\"d-flex mb-3 align-items-center\">\r\n                  <p class=\"col-4 fw-bold\">訂單金額：</p>\r\n                  <p>NT$ {{ currency(order.total) }}</p>\r\n                  <a href=\"#\" class=\"ms-4 px-3 fs-5 fas fa-chevron-circle-down\" :class=\"{'show':isShow}\" @click.prevent=\"isShow=!isShow\" ></a>\r\n                </div>\r\n                <div class=\"products-details\" ref=\"details\" :style=\"detailsHeight\">\r\n                  <p class=\"fw-bold mb-3\">訂單明細：</p>             \r\n                  <ul class=\"px-2 px-sm-4\">\r\n                    <li v-for=\"item in order.products\" :key=\"item.id\" class=\"mb-3 row g-3 align-items-center\">\r\n                      <div class=\"col-auto d-none d-ss-block\">\r\n                        <div class=\"bg-cover order-img\" :style=\"`background-image:url(${item.product.images[0]});`\"></div>\r\n                      </div>\r\n                      <div class=\"col\">\r\n                        <p class=\"mb-1\">{{item.product.title}}</p>\r\n                        <p class=\"\">數量 : {{item.qty}}</p>\r\n                      </div>\r\n                      <div class=\"col-auto col-sm-3\">\r\n                        <p class=\"\">NT$ {{ currency(item.total) }}</p>\r\n                      </div>       \r\n                    </li>\r\n                  </ul>\r\n                </div>                \r\n              </li>\r\n              <li class=\"d-flex mb-3\">\r\n                <p class=\"col-4 fw-bold\">付款狀態：</p>\r\n                <p v-if=\"!order.is_paid\" class=\"text-primary\">尚未付款</p>\r\n                <p v-if=\"order.is_paid\" class=\"text-success\">付款成功</p>\r\n              </li>\r\n            </ul>\r\n            <button type=\"button\" class=\"btn btn-payment w-100 mt-3\" @click=\"payOrder\" v-if=\"!order.is_paid\">確認結帳</button>\r\n          </div>          \r\n        </div>\r\n      </section>\r\n    </div>\r\n  </Layout>\r\n  <ScrollTop></ScrollTop>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport ScrollTop from '@/components/ScrollTop.vue'\r\nimport ToastMessages from '@/components/ToastMessages.vue'\r\nimport {currency} from '@/methods/filters'\r\n\r\nexport default {\r\n  components: {\r\n    ScrollTop,\r\n    ToastMessages\r\n  },\r\n  inject: ['pushMessagesState'],\r\n  data() {\r\n    return {\r\n      isShow: false,\r\n      isLoading: false,\r\n      order: {},\r\n    }\r\n  },\r\n  methods: {\r\n    currency,\r\n    getOrder() {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;\r\n      this.isLoading = true;\r\n      this.$http.get(api).then((res) => {\r\n        this.isLoading = false;\r\n        if (res.data.success) {\r\n          this.order = res.data.order;\r\n          this.order.total = Math.round(this.order.total);\r\n          this.order.create_at = this.processDate(this.order.create_at);\r\n        }\r\n      });\r\n    },\r\n    processDate(timestamp) {\r\n      let d = new Date(timestamp*1000);\r\n      let yy = d.getFullYear();\r\n      let mm = d.getMonth() + 1;\r\n      let dd = d.getDate();\r\n      return `${yy}-${mm}-${dd}`;\r\n    },\r\n    payOrder() {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;\r\n      this.isLoading = true;\r\n      this.$http.post(api).then((res) => {\r\n        this.isLoading = false;\r\n        this.pushMessagesState(res, res.data.message);\r\n        if (res.data.success) {\r\n          this.getOrder();\r\n          window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth'\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    detailsHeight() {\r\n      return {\r\n        'max-height': this.isShow? `${this.$refs.details.scrollHeight}px`: '0',\r\n      }\r\n    },\r\n    orderId() {\r\n      return this.$route.params.orderId;\r\n    }\r\n  },\r\n  created() {\r\n    this.getOrder();\r\n  }\r\n}\r\n</script>","import { render } from \"./Checkout.vue?vue&type=template&id=74aa58a1\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\ellen\\\\OneDrive\\\\桌面\\\\vue\\\\ecommerce_vue3\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}