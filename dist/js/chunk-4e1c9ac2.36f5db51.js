(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e1c9ac2"],{"00b4":function(e,t,c){"use strict";c("ac1f");var a=c("23e7"),s=c("da84"),o=c("c65b"),l=c("e330"),r=c("1626"),n=c("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=s.Error,b=l(/./.test);a({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!r(t))return b(this,e);var c=o(t,this,e);if(null!==c&&!n(c))throw new u("RegExp exec method returned something other than an Object or null");return!!c}})},b0c0:function(e,t,c){var a=c("83ab"),s=c("5e77").EXISTS,o=c("e330"),l=c("9bf2").f,r=Function.prototype,n=o(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(i.exec),b="name";a&&!s&&l(r,b,{configurable:!0,get:function(){try{return u(i,n(this))[1]}catch(e){return""}}})},cf2a:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),s=Object(a["h"])("div",null,null,-1),o={class:"pt-9 pb-6 order-bg-lightgray container-fluid container-custom"},l=Object(a["h"])("section",{class:"order-three-sqs mb-6"},[Object(a["h"])("div",{class:"row"},[Object(a["h"])("div",{class:"col-4"},[Object(a["h"])("div",{class:"sq-item active"},[Object(a["h"])("p",null,"STEP 1"),Object(a["h"])("p",null,"確認訂單")])]),Object(a["h"])("div",{class:"col-4"},[Object(a["h"])("div",{class:"sq-item"},[Object(a["h"])("p",null,"STEP 2"),Object(a["h"])("p",null,"建立訂單")])]),Object(a["h"])("div",{class:"col-4"},[Object(a["h"])("div",{class:"sq-item"},[Object(a["h"])("p",null,"STEP 3"),Object(a["h"])("p",null,"完成訂單")])])])],-1),r={class:"order-info row gx-lg-5"},n={class:"col-12 col-md-6 mb-5 mb-md-0"},i={class:"order px-2 ps-md-3 ps-lg-5"},u={class:"position-relative"},b=Object(a["h"])("h1",{class:"header"},"訂單資訊",-1),d={class:"col-auto d-none d-ss-block"},h={class:"col"},m={class:"mb-1"},j={class:""},O={class:"col-auto col-sm-3 col-lg-auto me-1 me-sm-0"},f={class:""},p={class:"input-group mb-4"},v=["placeholder"],g={class:"text-end"},k={class:"mb-2"},y=Object(a["j"])("總計金額"),x={key:0},V=Object(a["j"])("折扣後金額 "),S={class:"ms-4 fs-5"},w={class:"col-12 col-md-6"},C={class:"customer px-2 pe-me-3 pe-lg-5"},T=Object(a["h"])("h2",{class:"header"},"顧客資訊",-1),M={class:"form-item"},E=Object(a["h"])("label",{for:"email",class:"form-label"},"Email",-1),$={class:"form-item"},J=Object(a["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),q={class:"form-item"},P=Object(a["h"])("label",{for:"phonenb",class:"form-label"},"聯絡電話",-1),_={class:"form-item"},U=Object(a["h"])("label",{for:"address",class:"form-label"},"收件地址",-1),L={class:"form-item"},B=Object(a["h"])("label",{for:"notes",class:"form-label"},"備註",-1),R=Object(a["h"])("button",{type:"submit",class:"btn btn-order w-100"},"送出訂單",-1);function F(e,t,c,F,N,I){var Q=this,W=Object(a["J"])("Loading"),H=Object(a["J"])("ToastMessages"),X=Object(a["J"])("Field"),z=Object(a["J"])("ErrorMessage"),A=Object(a["J"])("Form"),D=Object(a["J"])("Layout"),G=Object(a["J"])("ScrollTop");return Object(a["B"])(),Object(a["g"])(a["a"],null,[s,Object(a["k"])(W,{active:N.isLoading},null,8,["active"]),Object(a["k"])(H),Object(a["k"])(D,{ref:"layout",onRenderCart:I.renderCart},{default:Object(a["V"])((function(){return[Object(a["h"])("div",o,[l,Object(a["h"])("section",r,[Object(a["h"])("div",n,[Object(a["h"])("div",i,[Object(a["h"])("div",u,[b,Object(a["h"])("button",{class:"btn-edit",onClick:t[0]||(t[0]=function(e){return Q.$refs.layout.isShow=!0})},"修改訂單")]),Object(a["h"])("ul",null,[(Object(a["B"])(!0),Object(a["g"])(a["a"],null,Object(a["H"])(N.cart.carts,(function(e){return Object(a["B"])(),Object(a["g"])("li",{key:e.id,class:"mb-4 row g-3 align-items-center"},[Object(a["h"])("div",d,[Object(a["h"])("div",{class:"order-img bg-cover",style:Object(a["t"])("background-image:url(".concat(e.product.images[0],");"))},null,4)]),Object(a["h"])("div",h,[Object(a["h"])("p",m,Object(a["M"])(e.product.title),1),Object(a["h"])("p",j,"數量 : "+Object(a["M"])(e.qty),1)]),Object(a["h"])("div",O,[Object(a["h"])("p",f,"NT$ "+Object(a["M"])(I.currency(e.total)),1)])])})),128))]),Object(a["h"])("div",p,[Object(a["W"])(Object(a["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return N.couponCode=e}),type:"text",class:"form-control text-center",placeholder:N.couponPlaceholder,"aria-label":"coupon code","aria-describedby":"coupon"},null,8,v),[[a["Q"],N.couponCode]]),Object(a["h"])("button",{class:"btn btn-coupon",type:"button",id:"coupon",onClick:t[2]||(t[2]=function(e){return I.useCoupon()})},"套用優惠券")]),Object(a["h"])("div",g,[Object(a["h"])("p",k,[y,Object(a["h"])("span",{class:Object(a["s"])(["ms-4",{"text-decoration-line-through":N.cart.total!==N.cart.final_total,"fs-5":N.cart.total==N.cart.final_total}])},"NT$ "+Object(a["M"])(I.currency(N.cart.total)),3)]),N.cart.total!==N.cart.final_total?(Object(a["B"])(),Object(a["g"])("p",x,[V,Object(a["h"])("span",S,"NT$ "+Object(a["M"])(I.currency(N.cart.final_total)),1)])):Object(a["f"])("",!0)])])]),Object(a["h"])("div",w,[Object(a["h"])("div",C,[T,Object(a["k"])(A,{onSubmit:I.createOrder},{default:Object(a["V"])((function(e){var c=e.errors;return[Object(a["h"])("div",M,[E,Object(a["k"])(X,{type:"email",name:"email",rules:"email|required",id:"email",class:Object(a["s"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",modelValue:N.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return N.form.user.email=e})},null,8,["class","modelValue"]),Object(a["k"])(z,{name:"email",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",$,[J,Object(a["k"])(X,{type:"text",name:"收件人姓名",rules:"required",id:"name",class:Object(a["s"])(["form-control",{"is-invalid":c["收件人姓名"]}]),placeholder:"請輸入姓名",modelValue:N.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return N.form.user.name=e})},null,8,["class","modelValue"]),Object(a["k"])(z,{name:"收件人姓名",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",q,[P,Object(a["k"])(X,{type:"text",name:"手機號碼",rules:I.isPhone,id:"phonenb",class:Object(a["s"])(["form-control",{"is-invalid":c["手機號碼"]}]),placeholder:"請輸入手機號碼",modelValue:N.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return N.form.user.tel=e})},null,8,["rules","class","modelValue"]),Object(a["k"])(z,{name:"手機號碼",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",_,[U,Object(a["k"])(X,{type:"text",name:"收件地址",rules:"required",id:"address",class:Object(a["s"])(["form-control",{"is-invalid":c["收件地址"]}]),placeholder:"請輸入地址",modelValue:N.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return N.form.user.address=e})},null,8,["class","modelValue"]),Object(a["k"])(z,{name:"收件地址",class:"invalid-feedback mt-1"})]),Object(a["h"])("div",L,[B,Object(a["W"])(Object(a["h"])("textarea",{name:"notes",id:"notes",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=function(e){return N.form.message=e})},null,512),[[a["Q"],N.form.message]])]),R]})),_:1},8,["onSubmit"])])])])])]})),_:1},8,["onRenderCart"]),Object(a["k"])(G)],64)}c("ac1f"),c("00b4"),c("99af");var N=c("7fd9"),I=c("f367"),Q=c("9bb9"),W={components:{ScrollTop:N["a"],ToastMessages:I["a"]},inject:["pushMessagesState"],data:function(){return{isLoading:!0,cart:{},couponCode:"",couponPlaceholder:"請輸入優惠券代碼",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{currency:Q["a"],isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確手機號碼"},renderCart:function(e){this.cart=e,this.isLoading=!1,0==this.cart.carts.length&&this.$router.push("/products"),this.cart.total!==this.cart.final_total&&(this.couponPlaceholder="已套用優惠券")},useCoupon:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/coupon");this.$http.post(t,{data:{code:this.couponCode}}).then((function(t){e.pushMessagesState(t,t.data.message),t.data.success&&e.$refs.layout.getCart()}))},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("a93a93","/order");this.$http.post(t,{data:this.form}).then((function(t){var c=e;setTimeout((function(){c.pushMessagesState(t,t.data.message)})),t.data.success&&e.$router.push("/checkout/".concat(t.data.orderId))}))}}},H=c("6b0d"),X=c.n(H);const z=X()(W,[["render",F]]);t["default"]=z}}]);
//# sourceMappingURL=chunk-4e1c9ac2.36f5db51.js.map